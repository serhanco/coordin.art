name: Deploy Landing Page to Hostinger

on:
  # Hangi branch'e push yapıldığında çalışacağını belirtir
  push:
    branches:
      - main # Ana branch'inizin adını buraya yazın (master, main vb.)

jobs:
  web_deploy:
    name: Build ve Hostinger'a Dağıt
    runs-on: ubuntu-latest

    steps:
    # Adım 1: Depoyu Çalışma Ortamına Çek
    - name: Depoyu Çek
      uses: actions/checkout@v4

    # Adım 2: Node.js Ortamını Kur
    - name: Node.js'i Kur
      uses: actions/setup-node@v4
      with:
        node-version: '20' # Projenizin gerektirdiği Node sürümünü yazın (Genellikle 18 veya 20)

    # Adım 3: Bağımlılıkları Yükle (npm install)
    - name: Bağımlılıkları Yükle
      run: npm install

    # Adım 4: Projeyi Build Et (npm run build)
    - name: Projeyi Build Et
      run: npm run build
      # Bu adım sonunda 'dist' klasörü oluşur.

    # Adım 5: Hostinger'a Dağıtım Yap (Sadece 'dist' klasörünü gönder)
    - name: SFTP ile Hostinger'a Yükle
      uses: SamKirkland/FTP-Deploy-Action@v4.3.0
      with:
        # 1. Adımda oluşturduğunuz gizli değişkenleri kullanır
        server: ${{ secrets.FTP_HOST }}
        username: ${{ secrets.FTP_USERNAME }}
        password: ${{ secrets.FTP_PASSWORD }}
        server-dir: ${{ secrets.FTP_TARGET_DIR }}
        # Yüklenecek yerel klasör (build çıktısı)
        local-dir: ./dist/ 
        # SFTP kullanıyorsanız
        protocol: sftp 
        port: 22 
        # public_html içeriğini dağıtımdan önce temizler
        state-name: .ftp-deploy-state
